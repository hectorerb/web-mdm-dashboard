---
layout: container
---

<div class="row">
  <div class="col-md-6">
        <a class="btn btn-lightweight no-outline navigation-btn">Index</a><ul role="navigation" id="sidenav-small" class="nav side-navigation side-navigation-small theme-default"><button type="button" class="close" data-dismiss="side-navigation" aria-label="close"><i class="glyph glyph-cancel"></i></button><li class="active side-nav-c2">Modules</li><ul class="nav collapse in" id="father-john-misty"><li><a href="module-animations.html">animations</a></li><li><a href="module-animations%2525252520WinJS.html">animations WinJS</a></li><li><a href="module-BuildItemList.html">BuildItemList</a></li><li><a href="module-bytesToSize.html">bytesToSize</a></li><li><a href="module-calc100PercentMinus.html">calc100PercentMinus</a></li><li><a href="module-configureDisplay.html">configureDisplay</a></li><li><a href="module-cookie.html">cookie</a></li><li><a href="module-getMode.html">getMode</a></li><li><a href="module-glpiApi.html">glpiApi</a></li><li><a href="module-handleMessage.html">handleMessage</a></li><li><a href="module-history.html">history</a></li><li><a href="module-itemtype.html">itemtype</a></li><li><a href="module-logout.html">logout</a></li><li><a href="module-nativeNotification.html">nativeNotification</a></li><li><a href="module-publicURL.html">publicURL</a></li><li><a href="module-setGlpiCookie.html">setGlpiCookie</a></li><li><a href="module-toDateInputValue.html">toDateInputValue</a></li><li><a href="module-updateObject.html">updateObject</a></li><li><a href="module-validateData.html">validateData</a></li><li><a href="module-validateDate.html">validateDate</a></li><li><a href="module-validateNotification.html">validateNotification</a></li></ul><li class="active side-nav-c2">Classes</li><ul class="nav collapse in" id="father-john-misty"><li><a href="About.html">About</a></li><li><a href="AdminDashboard.html">AdminDashboard</a></li><li><a href="AdminDashboardLayout.html">AdminDashboardLayout</a></li><li><a href="Applications.html">Applications</a></li><li><a href="ApplicationsAdd.html">ApplicationsAdd</a></li><li><a href="ApplicationsContent.html">ApplicationsContent</a></li><li><a href="ApplicationsEdit.html">ApplicationsEdit</a></li><li><a href="ApplicationsEditItemList.html">ApplicationsEditItemList</a></li><li><a href="ApplicationsItemList.html">ApplicationsItemList</a></li><li><a href="ApplicationsList.html">ApplicationsList</a></li><li><a href="ChangeDownloadURL.html">ChangeDownloadURL</a></li><li><a href="ChangeTokenLife.html">ChangeTokenLife</a></li><li><a href="Confirmation.html">Confirmation</a></li><li><a href="ContentPane.html">ContentPane</a></li><li><a href="DangerZone.html">DangerZone</a></li><li><a href="Dashboard.html">Dashboard</a></li><li><a href="DatePicker.html">DatePicker</a></li><li><a href="Devices.html">Devices</a></li><li><a href="DevicesAssociated.html">DevicesAssociated</a></li><li><a href="DevicesContent.html">DevicesContent</a></li><li><a href="DevicesEdit.html">DevicesEdit</a></li><li><a href="DevicesEditOne.html">DevicesEditOne</a></li><li><a href="DevicesItemList.html">DevicesItemList</a></li><li><a href="DevicesList.html">DevicesList</a></li><li><a href="Display.html">Display</a></li><li><a href="EditMultiple.html">EditMultiple</a></li><li><a href="Enroll.html">Enroll</a></li><li><a href="Entity.html">Entity</a></li><li><a href="ErrorValidation.html">ErrorValidation</a></li><li><a href="Feedback.html">Feedback</a></li><li><a href="Files.html">Files</a></li><li><a href="FilesAdd.html">FilesAdd</a></li><li><a href="FilesContent.html">FilesContent</a></li><li><a href="FilesEdit.html">FilesEdit</a></li><li><a href="FilesEditItemList.html">FilesEditItemList</a></li><li><a href="FilesItemList.html">FilesItemList</a></li><li><a href="FilesList.html">FilesList</a></li><li><a href="FilesUpload.html">FilesUpload</a></li><li><a href="FilesUploadItemList.html">FilesUploadItemList</a></li><li><a href="FileswithHandleMessages.html">FileswithHandleMessages</a></li><li><a href="Fleets.html">Fleets</a></li><li><a href="FleetsContent.html">FleetsContent</a></li><li><a href="FleetsEdit.html">FleetsEdit</a></li><li><a href="FleetsList.html">FleetsList</a></li><li><a href="FleetsTaskItemList.html">FleetsTaskItemList</a></li><li><a href="ForgotPassword.html">ForgotPassword</a></li><li><a href="Geolocation.html">Geolocation</a></li><li><a href="GeolocationList.html">GeolocationList</a></li><li><a href="GeolocationRange.html">GeolocationRange</a></li><li><a href="HeaderBreadcrumb.html">HeaderBreadcrumb</a></li><li><a href="HelpCenter.html">HelpCenter</a></li><li><a href="HelpCenterArticle.html">HelpCenterArticle</a></li><li><a href="HelpCenterList.html">HelpCenterList</a></li><li><a href="IconItemList.html">IconItemList</a></li><li><a href="IconWithPopper.html">IconWithPopper</a></li><li><a href="ImgWithPopper.html">ImgWithPopper</a></li><li><a href="Input.html">Input</a></li><li><a href="Inventory.html">Inventory</a></li><li><a href="Invitations.html">Invitations</a></li><li><a href="InvitationsItemList.html">InvitationsItemList</a></li><li><a href="InvitationsList.html">InvitationsList</a></li><li><a href="InvitationsPendingPage.html">InvitationsPendingPage</a></li><li><a href="License.html">License</a></li><li><a href="ListWithNavLinks.html">ListWithNavLinks</a></li><li><a href="Main.html">Main</a></li><li><a href="Map.html">Map</a></li><li><a href="module.exports_module.exports.html">exports</a></li><li><a href="Notifications.html">Notifications</a></li><li><a href="Panel.html">Panel</a></li><li><a href="PanelFields.html">PanelFields</a></li><li><a href="PanelResults.html">PanelResults</a></li><li><a href="PasswordFieldset.html">PasswordFieldset</a></li><li><a href="Profiles.html">Profiles</a></li><li><a href="ReleaseNotes.html">ReleaseNotes</a></li><li><a href="ResetPassword.html">ResetPassword</a></li><li><a href="RootApp.html">RootApp</a></li><li><a href="ScrollSync.html">ScrollSync</a></li><li><a href="ScrollSyncPanel.html">ScrollSyncPanel</a></li><li><a href="SearchEngine.html">SearchEngine</a></li><li><a href="SearchQueryBuilder.html">SearchQueryBuilder</a></li><li><a href="Security.html">Security</a></li><li><a href="Select.html">Select</a></li><li><a href="Settings.html">Settings</a></li><li><a href="SignIn.html">SignIn</a></li><li><a href="SignUp.html">SignUp</a></li><li><a href="SpanWithPopper.html">SpanWithPopper</a></li><li><a href="SplitView.html">SplitView</a></li><li><a href="Supervision.html">Supervision</a></li><li><a href="SystemInformation.html">SystemInformation</a></li><li><a href="SystemReport.html">SystemReport</a></li><li><a href="TasksDeployAppList.html">TasksDeployAppList</a></li><li><a href="TasksDeployFileList.html">TasksDeployFileList</a></li><li><a href="TasksRemoveAppList.html">TasksRemoveAppList</a></li><li><a href="TasksRemoveFileList.html">TasksRemoveFileList</a></li><li><a href="global.html#UsernameFieldset">UsernameFieldset</a></li><li><a href="Users.html">Users</a></li><li><a href="UsersContent.html">UsersContent</a></li><li><a href="UsersEditOne.html">UsersEditOne</a></li><li><a href="UsersItemList.html">UsersItemList</a></li><li><a href="UsersList.html">UsersList</a></li><li><a href="ValidateAccount.html">ValidateAccount</a></li></ul><li class="active side-nav-c2"><a href="global.html">Global</a><ul class="nav collapse in" id="father-john-misty"><li><a href="global.html#addEmail">addEmail</a></li><li><a href="global.html#addEvents">addEvents</a></li><li><a href="global.html#addMarkers">addMarkers</a></li><li><a href="global.html#agent">agent</a></li><li><a href="global.html#applyRange">applyRange</a></li><li><a href="global.html#arrayResultsWithFields">arrayResultsWithFields</a></li><li><a href="global.html#asyncAdminDashboard">asyncAdminDashboard</a></li><li><a href="global.html#asyncForgotPassword">asyncForgotPassword</a></li><li><a href="global.html#asyncLogout">asyncLogout</a></li><li><a href="global.html#asyncPasswordFieldset">asyncPasswordFieldset</a></li><li><a href="global.html#asyncResetPassword">asyncResetPassword</a></li><li><a href="global.html#asyncSignUp">asyncSignUp</a></li><li><a href="global.html#asyncValidateAccount">asyncValidateAccount</a></li><li><a href="global.html#blurInput">blurInput</a></li><li><a href="global.html#breadcrumbs">breadcrumbs</a></li><li><a href="global.html#bugsnagClient">bugsnagClient</a></li><li><a href="global.html#buildDataArray">buildDataArray</a></li><li><a href="global.html#buildList">buildList</a></li><li><a href="global.html#cancel">cancel</a></li><li><a href="global.html#change">change</a></li><li><a href="global.html#changeAction">changeAction</a></li><li><a href="global.html#changeEmail">changeEmail</a></li><li><a href="global.html#changeInput">changeInput</a></li><li><a href="global.html#changeLocalStorage">changeLocalStorage</a></li><li><a href="global.html#changeMode">changeMode</a></li><li><a href="global.html#changeNotificationType">changeNotificationType</a></li><li><a href="global.html#changePhase">changePhase</a></li><li><a href="global.html#changeRange">changeRange</a></li><li><a href="global.html#changeSelect">changeSelect</a></li><li><a href="global.html#changeselectedItem">changeselectedItem</a></li><li><a href="global.html#changeSelectedItems">changeSelectedItems</a></li><li><a href="global.html#changeSelectionMode">changeSelectionMode</a></li><li><a href="global.html#changeShowNotifications">changeShowNotifications</a></li><li><a href="global.html#changeState">changeState</a></li><li><a href="global.html#checkValidServiceWorker">checkValidServiceWorker</a></li><li><a href="global.html">childContextTypes</a></li><li><a href="global.html#cleanWebStorage">cleanWebStorage</a></li><li><a href="global.html#closeSession">closeSession</a></li><li><a href="global.html#componentDidMount">componentDidMount</a></li><li><a href="global.html#componentDidUpdate">componentDidUpdate</a></li><li><a href="global.html#componentWillUnmount">componentWillUnmount</a></li><li><a href="global.html#ConstructInputs">ConstructInputs</a></li><li><a href="global.html#Contant">Contant</a></li><li><a href="global.html">contextTypes</a></li><li><a href="global.html#createFields">createFields</a></li><li><a href="global.html#createListElement">createListElement</a></li><li><a href="global.html#createRenderElament">createRenderElament</a></li><li><a href="global.html#days">days</a></li><li><a href="global.html">defaultProps</a></li><li><a href="global.html#delete">delete</a></li><li><a href="global.html#deleteEmail">deleteEmail</a></li><li><a href="global.html#deleteUser">deleteUser</a></li><li><a href="global.html#EmptyMessage">EmptyMessage</a></li><li><a href="global.html#ErrorBoundary">ErrorBoundary</a></li><li><a href="global.html#ErrorPage">ErrorPage</a></li><li><a href="global.html#fileExtension">fileExtension</a></li><li><a href="global.html#fileSizeAcceptable">fileSizeAcceptable</a></li><li><a href="global.html#filesRemoveAll">filesRemoveAll</a></li><li><a href="global.html#filesRemoveOne">filesRemoveOne</a></li><li><a href="global.html#filesUpload">filesUpload</a></li><li><a href="global.html#fileTypeAcceptable">fileTypeAcceptable</a></li><li><a href="global.html#filterPoliciesPerCategory">filterPoliciesPerCategory</a></li><li><a href="global.html#findPanel">findPanel</a></li><li><a href="global.html#FleetsItemList">FleetsItemList</a></li><li><a href="global.html#forceAnimation">forceAnimation</a></li><li><a href="global.html#GenerateRoutes">GenerateRoutes</a></li><li><a href="global.html#getApplications">getApplications</a></li><li><a href="global.html#getChildContext">getChildContext</a></li><li><a href="global.html">getDerivedStateFromProps</a></li><li><a href="global.html#getDevices">getDevices</a></li><li><a href="global.html#getDevicesByOperatingSystemVersion">getDevicesByOperatingSystemVersion</a></li><li><a href="global.html#getDevicesByUsers">getDevicesByUsers</a></li><li><a href="global.html#getFiles">getFiles</a></li><li><a href="global.html#getFleets">getFleets</a></li><li><a href="global.html#getImage">getImage</a></li><li><a href="global.html#getInvitations">getInvitations</a></li><li><a href="global.html#getPendingInvitations">getPendingInvitations</a></li><li><a href="global.html#getQueryString">getQueryString</a></li><li><a href="global.html#getTranslation">getTranslation</a></li><li><a href="global.html#getTypeData">getTypeData</a></li><li><a href="global.html#getUsers">getUsers</a></li><li><a href="global.html#getValueOfTask">getValueOfTask</a></li><li><a href="global.html#goToList">goToList</a></li><li><a href="global.html#goToLocation">goToLocation</a></li><li><a href="global.html#groupHeaderRenderer">groupHeaderRenderer</a></li><li><a href="global.html#handleActivePolicyToggle">handleActivePolicyToggle</a></li><li><a href="global.html#handleAdd">handleAdd</a></li><li><a href="global.html#handleAddedToggle">handleAddedToggle</a></li><li><a href="global.html#handleAddTask">handleAddTask</a></li><li><a href="global.html#handleBlurInput">handleBlurInput</a></li><li><a href="global.html#handleChangeInput">handleChangeInput</a></li><li><a href="global.html#handleChangeItemType">handleChangeItemType</a></li><li><a href="global.html#handleChangeQuery">handleChangeQuery</a></li><li><a href="global.html#handleCreateFleet">handleCreateFleet</a></li><li><a href="global.html#handleDelete">handleDelete</a></li><li><a href="global.html#handleDeleteFleet">handleDeleteFleet</a></li><li><a href="global.html#handleDuplicateFleet">handleDuplicateFleet</a></li><li><a href="global.html#handleEdit">handleEdit</a></li><li><a href="global.html#handleFleetHaveTask">handleFleetHaveTask</a></li><li><a href="global.html#handleFormSubmit">handleFormSubmit</a></li><li><a href="global.html#handleOnSearch">handleOnSearch</a></li><li><a href="global.html#handlePanelScroll">handlePanelScroll</a></li><li><a href="global.html#handleRecover">handleRecover</a></li><li><a href="global.html#handleRefresh">handleRefresh</a></li><li><a href="global.html#handleRemove">handleRemove</a></li><li><a href="global.html#handleRemoveTask">handleRemoveTask</a></li><li><a href="global.html#handleRemoveValueTask">handleRemoveValueTask</a></li><li><a href="global.html#handleRequestItemType">handleRequestItemType</a></li><li><a href="global.html#handleResendEmail">handleResendEmail</a></li><li><a href="global.html#handleResetPassword">handleResetPassword</a></li><li><a href="global.html#handleResize">handleResize</a></li><li><a href="global.html#handleSave">handleSave</a></li><li><a href="global.html#handleSaveFiles">handleSaveFiles</a></li><li><a href="global.html#handleSaveFleet">handleSaveFleet</a></li><li><a href="global.html#handleSaveOneDevices">handleSaveOneDevices</a></li><li><a href="global.html#handleSelectionChanged">handleSelectionChanged</a></li><li><a href="global.html#handleSort">handleSort</a></li><li><a href="global.html#handleSubmitForm">handleSubmitForm</a></li><li><a href="global.html#handleToggleSelectionMode">handleToggleSelectionMode</a></li><li><a href="global.html#handleUpdateFleet">handleUpdateFleet</a></li><li><a href="global.html#handleUpdateFleetName">handleUpdateFleetName</a></li><li><a href="global.html#handleUpdateValueTask">handleUpdateValueTask</a></li><li><a href="global.html#headerComponent">headerComponent</a></li><li><a href="global.html#InfoBox">InfoBox</a></li><li><a href="global.html#inviteDevice">inviteDevice</a></li><li><a href="global.html#isAuthenticated">isAuthenticated</a></li><li><a href="global.html#isLocalhost">isLocalhost</a></li><li><a href="global.html">isOK</a></li><li><a href="global.html#ItemListRenderer">ItemListRenderer</a></li><li><a href="global.html#languages">languages</a></li><li><a href="global.html#listRender">listRender</a></li><li><a href="global.html#listRequest">listRequest</a></li><li><a href="global.html#loadComponent">loadComponent</a></li><li><a href="global.html#loader">loader</a></li><li><a href="global.html#Loader">Loader</a></li><li><a href="global.html#Loading">Loading</a></li><li><a href="global.html#loadMoreData">loadMoreData</a></li><li><a href="global.html#LogInServer">LogInServer</a></li><li><a href="global.html#logout">logout</a></li><li><a href="global.html#mimeTypeLeft">mimeTypeLeft</a></li><li><a href="global.html#mimeTypeRight">mimeTypeRight</a></li><li><a href="global.html#months">months</a></li><li><a href="global.html#normalizeQuery">normalizeQuery</a></li><li><a href="global.html#normalizeRule">normalizeRule</a></li><li><a href="global.html#onDragEnter">onDragEnter</a></li><li><a href="global.html#onDragLeave">onDragLeave</a></li><li><a href="global.html#onDragOver">onDragOver</a></li><li><a href="global.html#onDrop">onDrop</a></li><li><a href="global.html#onError">onError</a></li><li><a href="global.html#onFilesChange">onFilesChange</a></li><li><a href="global.html#onFilesError">onFilesError</a></li><li><a href="global.html#openFileChooser">openFileChooser</a></li><li><a href="global.html#Overview">Overview</a></li><li><a href="global.html#panels">panels</a></li><li><a href="global.html#ping">ping</a></li><li><a href="global.html#previewFile">previewFile</a></li><li><a href="global.html#PrivateRoute">PrivateRoute</a></li><li><a href="global.html#propsData">propsData</a></li><li><a href="global.html#PropsRoute">PropsRoute</a></li><li><a href="global.html">propTypes</a></li><li><a href="global.html#recursiveExtractQueryRules">recursiveExtractQueryRules</a></li><li><a href="global.html#refreshRender">refreshRender</a></li><li><a href="global.html#register">register</a></li><li><a href="global.html#registerPanel">registerPanel</a></li><li><a href="global.html#registerValidSW">registerValidSW</a></li><li><a href="global.html#removeEvents">removeEvents</a></li><li><a href="global.html#removeFile">removeFile</a></li><li><a href="global.html#removeFiles">removeFiles</a></li><li><a href="global.html#render">render</a></li><li><a href="global.html#renderElement">renderElement</a></li><li><a href="global.html#renderGraphics">renderGraphics</a></li><li><a href="global.html#renderInfoBox">renderInfoBox</a></li><li><a href="global.html#RenderMergedProps">RenderMergedProps</a></li><li><a href="global.html#renderMinMaxVersion">renderMinMaxVersion</a></li><li><a href="global.html#requestAllData">requestAllData</a></li><li><a href="global.html#requestInventory">requestInventory</a></li><li><a href="global.html#requestLocation">requestLocation</a></li><li><a href="global.html#requestValidation">requestValidation</a></li><li><a href="global.html#resetData">resetData</a></li><li><a href="global.html#routes">routes</a></li><li><a href="global.html#saveChanges">saveChanges</a></li><li><a href="global.html#savePassword">savePassword</a></li><li><a href="global.html#saveTokenLife">saveTokenLife</a></li><li><a href="global.html#saveURL">saveURL</a></li><li><a href="global.html#saveValues">saveValues</a></li><li><a href="global.html#setFields">setFields</a></li><li><a href="global.html#showError">showError</a></li><li><a href="global.html#showLocation">showLocation</a></li><li><a href="global.html#styleNav">styleNav</a></li><li><a href="global.html#stylesArticle">stylesArticle</a></li><li><a href="global.html#stylesContent">stylesContent</a></li><li><a href="global.html#stylesList">stylesList</a></li><li><a href="global.html#TermsOfUse">TermsOfUse</a></li><li><a href="global.html#TextArea">TextArea</a></li><li><a href="global.html#TIMEOUT_CONTRACT">TIMEOUT_CONTRACT</a></li><li><a href="global.html#unenroll">unenroll</a></li><li><a href="global.html#unregister">unregister</a></li><li><a href="global.html#unregisterPanel">unregisterPanel</a></li><li><a href="global.html#updateItemList">updateItemList</a></li><li><a href="global.html#updateState">updateState</a></li><li><a href="global.html#validate">validate</a></li><li><a href="global.html#validateError">validateError</a></li><li><a href="global.html">validation</a></li><li><a href="global.html#wipe">wipe</a></li><li><a href="global.html#withAdminDashboardLayout">withAdminDashboardLayout</a></li><li><a href="global.html#withAsyncComponent">withAsyncComponent</a></li><li><a href="global.html#withAuthenticationLayout">withAuthenticationLayout</a></li><li><a href="global.html#withGLPI">withGLPI</a></li><li><a href="global.html#withHandleMessages">withHandleMessages</a></li><li><a href="global.html#years">years</a></li></ul></li></ul>
  </div>
    <div class="col-md-18 navigation-section">
    <div id="main">

        <h1 class="page-title">Source: containers/HomeDashboard/index.js</h1>

        



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*
 *   Copyright © 2018 Teclib. All rights reserved.
 *
 *   This file is part of web-mdm-dashboard
 *
 * web-mdm-dashboard is a subproject of Flyve MDM. Flyve MDM is a mobile
 * device management software.
 *
 * Flyve MDM is free software: you can redistribute it and/or
 * modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation; either version 3
 * of the License, or (at your option) any later version.
 *
 * Flyve MDM is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * ------------------------------------------------------------------------------
 * @author     Gianfranco Manganiello (gmanganiello@teclib.com)
 * @author     Hector Rondon (hrondon@teclib.com)
 * @copyright  Copyright © 2018 Teclib. All rights reserved.
 * @license    GPLv3 https://www.gnu.org/licenses/gpl-3.0.html
 * @link       https://github.com/flyve-mdm/web-mdm-dashboard
 * @link       http://flyve.org/web-mdm-dashboard
 * @link       https://flyve-mdm.com
 * ------------------------------------------------------------------------------
 */

/** import dependencies */
import React, {
  PureComponent,
} from 'react'
import PropTypes from 'prop-types'
import {
  VictoryPie,
} from 'victory'
import {
  NavLink,
} from 'react-router-dom'
import I18n from 'shared/i18n'
import itemtype from 'shared/itemtype'
import publicURL from 'shared/publicURL'
import logout from 'shared/logout'
import {
  slideTop,
} from 'shared/animations/index'
import Loading from 'components/Loading'
import InfoBox from 'components/InfoBox'
import EmptyMessage from 'components/EmptyMessage'
import ContentPane from 'components/ContentPane'
import withGLPI from 'hoc/withGLPI'

/**
 * Component with the Home section
 * @class Dashboard
 * @extends PureComponent
 */
class Dashboard extends PureComponent {
  /** @constructor */
  constructor(props) {
    super(props)
    this.state = {
      isLoading: true,
      applicationsUploaded: undefined,
      devicesByOperatingSystemVersion: undefined,
      devicesByUsers: undefined,
      devicesCurrentlyManaged: undefined,
      filesUploaded: undefined,
      fleetsCurrentlyManaged: undefined,
      invitationsSent: undefined,
      numberUsers: undefined,
      pendingInvitations: undefined,
      display: localStorage.getItem('display') ? JSON.parse(localStorage.getItem('display')) : {},
    }
  }

  /**
   * Get all necessary data
   * @function componentDidMount
   * @async
   */
  componentDidMount = async () => {
    if (this.props.glpi.sessionToken) {
      let isValid = true
      const newState = {
        applicationsUploaded: undefined,
        filesUploaded: undefined,
        fleetsCurrentlyManaged: undefined,
        invitationsSent: undefined,
        pendingInvitations: undefined,
        numberUsers: undefined,
        devicesCurrentlyManaged: undefined,
        devicesByOperatingSystemVersion: undefined,
        devicesByUsers: undefined,
      }
      if (isValid &amp;&amp; this.state.display.applicationsUploaded) {
        try {
          newState.applicationsUploaded = await this.getApplications()
        } catch (error) {
          isValid = this.validateError(error)
        }
      }
      if (isValid &amp;&amp; this.state.display.filesUploaded) {
        try {
          newState.filesUploaded = await this.getFiles()
        } catch (error) {
          isValid = this.validateError(error)
        }
      }
      if (isValid &amp;&amp; this.state.display.fleetsCurrentlyManaged) {
        try {
          newState.fleetsCurrentlyManaged = await this.getFleets()
        } catch (error) {
          isValid = this.validateError(error)
        }
      }
      if (isValid &amp;&amp; this.state.display.invitationsSent) {
        try {
          newState.invitationsSent = await this.getInvitations()
        } catch (error) {
          isValid = this.validateError(error)
        }
      }
      if (isValid &amp;&amp; this.state.display.pendingInvitations) {
        try {
          newState.pendingInvitations = await this.getPendingInvitations()
        } catch (error) {
          isValid = this.validateError(error)
        }
      }
      if (isValid &amp;&amp; this.state.display.numberUsers) {
        try {
          newState.numberUsers = await this.getUsers()
        } catch (error) {
          isValid = this.validateError(error)
        }
      }
      if (isValid &amp;&amp; (this.state.display.devicesCurrentlyManaged || this.state.display.devicesByOperatingSystemVersion
          || this.state.display.devicesByUsers)) {
        try {
          newState.devices = await this.getDevices()
        } catch (error) {
          isValid = this.validateError(error)
        }
      }
      if (this.state.display.devicesCurrentlyManaged &amp;&amp; newState.devices) {
        try {
          newState.devicesCurrentlyManaged = newState.devices.totalcount
        } catch (error) {
          isValid = this.validateError(error)
        }
      }
      if (this.state.display.devicesByOperatingSystemVersion &amp;&amp; newState.devices &amp;&amp; newState.devices.totalcount > 0) {
        try {
          newState.devicesByOperatingSystemVersion = await this.getDevicesByOperatingSystemVersion(newState.devices)
        } catch (error) {
          isValid = this.validateError(error)
        }
      }
      if (this.state.display.devicesByUsers &amp;&amp; newState.devices &amp;&amp; newState.devices.totalcount > 0) {
        try {
          newState.devicesByUsers = await this.getDevicesByUsers(newState.devices)
        } catch (error) {
          isValid = this.validateError(error)
        }
      }

      this.setState({
        applicationsUploaded: newState.applicationsUploaded,
        filesUploaded: newState.filesUploaded,
        fleetsCurrentlyManaged: newState.fleetsCurrentlyManaged,
        invitationsSent: newState.invitationsSent,
        pendingInvitations: newState.pendingInvitations,
        numberUsers: newState.numberUsers,
        devicesCurrentlyManaged: newState.devicesCurrentlyManaged,
        devicesByOperatingSystemVersion: newState.devicesByOperatingSystemVersion,
        devicesByUsers: newState.devicesByUsers,
        isLoading: false,
      }, () => {
        // Play the animation
        slideTop(this.home).play()
      })
    } else {
      logout()
    }
  }

  /**
   * Get devices
   * @function getDevices
   * @async
   * @return {promise}
   */
  getDevices = () => new Promise(async (resolve, reject) => {
    try {
      const devices = await this.props.glpi.searchItems({
        itemtype: itemtype.PluginFlyvemdmAgent,
        options: {
          uid_cols: true,
          forcedisplay: [2, 12],
        },
      })
      resolve(devices)
    } catch (error) {
      this.showError(error)
      reject(error)
    }
  })

  /**
   * Get users
   * @function getUsers
   * @async
   * @return {promise}
   */
  getUsers = () => new Promise(async (resolve, reject) => {
    try {
      const users = await this.props.glpi.searchItems({
        itemtype: itemtype.User,
      })
      resolve(users.totalcount)
    } catch (error) {
      this.showError(error)
      reject(error)
    }
  })

  /**
   * Get devices by operating system version
   * @function getDevicesByOperatingSystemVersion
   * @async
   * @param {object} devices
   * @return {promise}
   */
  getDevicesByOperatingSystemVersion = devices => new Promise(async (resolve, reject) => {
    try {
      const devicesAndroid = devices.data.filter(device => device[`${itemtype.PluginFlyvemdmAgent}.mdm_type`]
        === 'android').length
      const devicesiOS = devices.data.filter(device => device[`${itemtype.PluginFlyvemdmAgent}.mdm_type`] === 'ios')
        .length
      const devicesWindows = devices.data.filter(device => device[`${itemtype.PluginFlyvemdmAgent}.mdm_type`]
        === 'windows').length
      const devicesByOperatingSystemVersion = []
      if (devicesAndroid) {
        devicesByOperatingSystemVersion.push({
          x: 'Android',
          y: devicesAndroid,
        })
      }
      if (devicesiOS) {
        devicesByOperatingSystemVersion.push({
          x: 'iOS',
          y: devicesiOS,
        })
      }
      if (devicesWindows) {
        devicesByOperatingSystemVersion.push({
          x: 'Windows',
          y: devicesWindows,
        })
      }
      resolve(devicesByOperatingSystemVersion)
    } catch (error) {
      this.showError(error)
      reject(error)
    }
  })

  /**
   * Get devices by users
   * @function getDevicesByUsers
   * @async
   * @param {object} devices
   * @return {promise}
   */
  getDevicesByUsers = devices => new Promise(async (resolve, reject) => {
    try {
      const devicesByUsers = devices.data.map(device => ({
        name: device[`${itemtype.PluginFlyvemdmAgent}.name`],
        id: device[`${itemtype.PluginFlyvemdmAgent}.id`],
      }))
      resolve(devicesByUsers)
    } catch (error) {
      this.showError(error)
      reject(error)
    }
  })

  /**
   * Get invitations
   * @function getInvitations
   * @async
   * @return {promise}
   */
  getInvitations = () => new Promise(async (resolve, reject) => {
    try {
      const invitations = await this.props.glpi.searchItems({
        itemtype: itemtype.PluginFlyvemdmInvitation,
      })
      resolve(invitations.totalcount)
    } catch (error) {
      this.showError(error)
      reject(error)
    }
  })

  /**
   * Get pending invitations
   * @function getPendingInvitations
   * @async
   * @return {promise}
   */
  getPendingInvitations = () => new Promise(async (resolve, reject) => {
    try {
      const pendingInvitations = await this.props.glpi.searchItems({
        itemtype: itemtype.PluginFlyvemdmInvitation,
        criteria: [{
          field: 3,
          link: 'and',
          searchtype: 'equal',
          value: 'pending',
        }],
      })
      resolve(pendingInvitations.totalcount)
    } catch (error) {
      this.showError(error)
      reject(error)
    }
  })

  /**
   * Get fleets
   * @function getFleets
   * @async
   * @return {promise}
   */
  getFleets = () => new Promise(async (resolve, reject) => {
    try {
      const fleets = await this.props.glpi.searchItems({
        itemtype: itemtype.PluginFlyvemdmFleet,
      })
      resolve(fleets.totalcount)
    } catch (error) {
      this.showError(error)
      reject(error)
    }
  })

  /**
   * Get files
   * @function getFiles
   * @async
   * @return {promise}
   */
  getFiles = () => new Promise(async (resolve, reject) => {
    try {
      const files = await this.props.glpi.searchItems({
        itemtype: itemtype.PluginFlyvemdmFile,
      })
      resolve(files.totalcount)
    } catch (error) {
      this.showError(error)
      reject(error)
    }
  })

  /**
   * Get applications
   * @function getApplications
   * @async
   * @return {promise}
   */
  getApplications = () => new Promise(async (resolve, reject) => {
    try {
      const applications = await this.props.glpi.searchItems({
        itemtype: itemtype.PluginFlyvemdmPackage,
      })
      resolve(applications.totalcount)
    } catch (error) {
      this.showError(error)
      reject(error)
    }
  })

  /**
   * Show the error notifications
   * @function showError
   * @param {*} error
   */
  showError = (error) => {
    this.props.toast.setNotification(this.props.handleMessage({
      type: 'alert',
      message: error,
      customErrorRoute: `${publicURL}/app/error`,
    }))
  }

  /**
   * Validate if an invalid session exists
   * @function validateError
   * @param {*} error
   * @return {boolean}
   */
  validateError = error => (
    !((error &amp;&amp; error.data &amp;&amp; error.data[0] &amp;&amp; (error.data[0][1] === 'session_token seems invalid')))
  )

  /**
   * Build the necessary infoboxes
   * @function renderInfoBox
   * @return {array}
   */
  renderInfoBox() {
    const boxes = []

    if (this.state.devicesCurrentlyManaged) {
      boxes.push(
        &lt;InfoBox
          to="app/devices"
          count={this.state.devicesCurrentlyManaged}
          name={(this.state.devicesCurrentlyManaged === 1) ? I18n.t('commons.device') : I18n.t('commons.devices')}
          icon="deviceIcon"
          key="devicesCurrentlyManaged"
        />,
      )
    }

    if (this.state.invitationsSent) {
      boxes.push(
        &lt;InfoBox
          to="app/invitations"
          count={this.state.invitationsSent}
          name={(this.state.invitationsSent === 1) ? I18n.t('commons.invitation') : I18n.t('commons.invitations')}
          icon="emailIcon"
          key="invitationsSent"
        />,
      )
    }

    if (this.state.fleetsCurrentlyManaged) {
      boxes.push(
        &lt;InfoBox
          to="app/fleets"
          count={this.state.fleetsCurrentlyManaged}
          name={(this.state.fleetsCurrentlyManaged === 1) ? I18n.t('commons.fleet') : I18n.t('commons.fleets')}
          icon="goToStartIcon"
          key="fleetsCurrentlyManaged"
        />,
      )
    }

    if (this.state.filesUploaded) {
      boxes.push(
        &lt;InfoBox
          to="app/files"
          count={this.state.filesUploaded}
          name={(this.state.filesUploaded === 1) ? I18n.t('commons.file') : I18n.t('commons.files')}
          icon="filesIcon"
          key="filesUploaded"
        />,
      )
    }

    if (this.state.applicationsUploaded) {
      boxes.push(
        &lt;InfoBox
          to="app/applications"
          count={this.state.applicationsUploaded}
          name={(this.state.applicationsUploaded === 1) ? I18n.t('commons.application') : I18n.t('commons.applications')}
          icon="switchAppsIcon"
          key="applicationsUploaded"
        />,
      )
    }

    if (this.state.numberUsers) {
      boxes.push(
        &lt;InfoBox
          to="app/users"
          count={this.state.numberUsers}
          name={(this.state.numberUsers === 1) ? I18n.t('commons.user') : I18n.t('commons.users')}
          icon="peopleIcon"
          key="numberUsers"
        />,
      )
    }

    return boxes
  }

  /**
   * Build the necessary graphics
   * @function renderGraphics
   * @return {array}
   */
  renderGraphics() {
    const graphics = []

    if (this.state.devicesByOperatingSystemVersion) {
      graphics.push(
        &lt;div key="DevicesOS" className="info-box">
          &lt;VictoryPie
            colorScale={[
              '#969696',
              '#bdbdbd',
              '#d9d9d9',
            ]}
            innerRadius={50}
            padAngle={5}
            labelRadius={90}
            labels={d => `${d.x} ${d.y}`}
            data={this.state.devicesByOperatingSystemVersion}
            style={{ labels: { fill: '#000', fontSize: 24, fontWeight: 300 } }}
          />
          &lt;span className="title-box">
            {I18n.t('commons.devices_by_plataform').toUpperCase()}
          &lt;/span>
        &lt;/div>,
      )
    }

    if (this.state.pendingInvitations) {
      graphics.push(
        &lt;div key="InvitationsChart" className="info-box">
          &lt;VictoryPie
            colorScale={[
              '#969696',
              '#bdbdbd',
              '#d9d9d9',
            ]}
            innerRadius={50}
            padAngle={5}
            labelRadius={90}
            labels={d => `${d.x} ${d.y}`}
            data={[
              { x: I18n.t('commons.invitations'), y: this.state.pendingInvitations },
            ]}
            style={{ labels: { fill: '#000', fontSize: 24, fontWeight: 300 } }}
          />
          &lt;span className="title-box">
            {I18n.t('commons.pending_invitations').toUpperCase()}
          &lt;/span>
        &lt;/div>,
      )
    }

    if (this.state.devicesByUsers) {
      graphics.push(
        &lt;div key="devicesByUsersChart" className="info-box navlinks">
          &lt;ul>
            {
              this.state.devicesByUsers.map((device, id) => (
                &lt;li key={`device-${id.toString()}`}>
                  &lt;NavLink
                    exact
                    to={`${publicURL}/app/devices/${device.id}`}
                  >
                    {device.name}
                  &lt;/NavLink>
                &lt;/li>
              ))
            }
          &lt;/ul>
          &lt;span className="title-box">
            {I18n.t('commons.devices_by_users').toUpperCase()}
          &lt;/span>
        &lt;/div>,
      )
    }

    return graphics
  }

  /**
   * Render component
   * @function render
   */
  render() {
    const renderInfoBox = this.renderInfoBox()
    const renderGraphics = this.renderGraphics()
    const renderComponent = this.state.isLoading
      ? (
        &lt;div style={{ width: '100%', height: 'calc(100vh - 80px)' }}>
          &lt;Loading message={`${I18n.t('commons.loading')}...`} />
        &lt;/div>
      )
      : (
        &lt;ContentPane>
          &lt;div className="dashboard" ref={(home) => { this.home = home }}>
            {
                (renderInfoBox.length > 0 || renderGraphics.length > 0)
                  ? (
                    &lt;div className="dashboard__wrapper">
                      &lt;div className="dashboard__infobox">
                        {renderInfoBox}
                      &lt;/div>

                      &lt;div className="dashboard__chart">
                        {renderGraphics}
                      &lt;/div>
                    &lt;/div>
                  )
                  : &lt;EmptyMessage message={I18n.t('commons.no_data')} />
              }
          &lt;/div>
        &lt;/ContentPane>
      )
    return renderComponent
  }
}

Dashboard.propTypes = {
  glpi: PropTypes.object.isRequired,
  toast: PropTypes.object.isRequired,
  handleMessage: PropTypes.func.isRequired,
}

export default withGLPI(Dashboard)
</code></pre>
        </article>
    </section>




    </div>
  </div>

<br class="clear">
